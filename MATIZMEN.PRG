* izvrsiti prosirenje baze za jedno polje i produzrnje ziro acuna
IF File("OMATPOM.DBF")
	! DEL OMATPOM.DBF > NUL
ENDIF

IF ! File("OMATPOM.DBF")
	CREATE RADNA
	STORE "PREZ      C20 " TO POLJE1
	STORE "IME       C15 " TO POLJE2
	STORE "ADR       C30 " TO POLJE3
	STORE "TELS      C10 " TO POLJE4
	STORE "ADRR      C30 " TO POLJE5
	STORE "TELR      C10 " TO POLJE6
	STORE "MBRRAD    N10 " TO POLJE7
	STORE "SIFDEL    N10 " TO POLJE8
	STORE "PORSIF    C10 " TO POLJE9
	STORE "PORSIFN   C9  " TO POLJE10
	STORE "ZIRO      C30 " TO POLJE11
	STORE "DELSTR    C2  " TO POLJE12
	STORE "DELKOM    C2  " TO POLJE13
	STORE "NAZRAD    C30 " TO POLJE14
	STORE "POC       D8  " TO POLJE15
	STORE "KRAJ      D8  " TO POLJE16
	STORE "JMBG      C13 " TO POLJE17
	STORE "KONTROL   N2  " TO POLJE18
	STORE "IOCA      C13 " TO POLJE19
	STORE "RBPIO     N10 " TO POLJE20

	FOR I = 1 TO 20
		IF I < 10
			STORE  STR(I,1) TO BROJ
		ELSE
			STORE  STR(I,2) TO BROJ
		ENDIF
		P1 = "POLJE" + BROJ
		APPEND BLANK
		REPLACE FIELD_NAME WITH SUBSTR(&P1,1,10)
		REPLACE FIELD_TYPE WITH SUBSTR(&P1,11,1)
		REPLACE FIELD_LEN WITH VAL(SUBSTR(&P1,12,2))
		REPLACE FIELD_DEC WITH VAL(SUBSTR(&P1,14,1))
	NEXT I

	CREATE OMATPOM FROM RADNA
	USE
	ERASE RADNA.DBF

	* sada prepis
	SELECT 0
	USE OMATPOM
	SELECT 0
	USE OBVEZMAT
	DO WHILE ! Eof()
		SELECT OMATPOM
		APPEND BLANK
		REPLACE PREZ  WITH  OBVEZMAT->PREZ
		REPLACE IME   WITH  OBVEZMAT->IME
		REPLACE ADR   WITH  OBVEZMAT->ADR
		REPLACE TELS  WITH  OBVEZMAT->TELS
		REPLACE ADRR  WITH  OBVEZMAT->ADRR
		REPLACE TELR  WITH  OBVEZMAT->TELR
		REPLACE PORSIF WITH OBVEZMAT->PORSIF
		REPLACE ZIRO WITH    OBVEZMAT->ZIRO
		REPLACE DELSTR WITH  OBVEZMAT->DELSTR
		REPLACE DELKOM WITH  OBVEZMAT->DELKOM
		REPLACE NAZRAD WITH  OBVEZMAT->NAZRAD
		REPLACE POC  WITH    OBVEZMAT->POC
		REPLACE KRAJ WITH    OBVEZMAT->KRAJ

		SELECT OBVEZMAT
		SKIP
	ENDDO

	CLOSE OBVEZMAT
	CLOSE OMATPOM
	! REN OBVEZMAT.DBF MATOLD.DBF
	! COPY OMATPOM.DBF OBVEZMAT.DBF
ENDIF

RETURN
