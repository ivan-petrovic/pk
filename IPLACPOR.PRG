DbPlacpnas()

SELECT 0
USE PLACPNAS

SELECT 0
USE PLACP INDEX PLACP

* mcPPKPC03(9), mcPORNDO22(10), mcDOPVL43(11), mcFINTRA50(12), mcPORIM82(13), mcPORSRE66(14), mcPORPAU36(15), mcGGZEM(16)
SELECT PLACPNAS
mcPPKPC03  = CPPKPC03
mcPORNDO22 = CPORNDO22
mcDOPVL43  = CDOPVL43
mcFINTRA50 = CFINTRA50
mcPORIM82  = CPORIM82
mcPORSRE66 = CPORSRE66
mcPORPAU36 = CPORPAU36
mcGGZEM    = CGGZEM

SELECT PLACP

mPPOP73   = Val("00000000.00")
mPPUS05   = Val("00000000.00")
mPPNV46   = Val("00000000.00")
mPPSREC81 = Val("00000000.00")
mPPKPC03  = Val("00000000.00")
mPORNDO22 = Val("00000000.00")
mDOPVL43  = Val("00000000.00")
mFINTRA50 = Val("00000000.00")
mPORIM82  = Val("00000000.00")
mPORSRE66 = Val("00000000.00")
mPORPAU36 = Val("00000000.00")
mGGZEM    = Val("00000000.00")
mREZ1     = Val("00000000.00")
mREZ2     = Val("00000000.00")
mREZ3     = Val("00000000.00")
mREZ11    = Space(18)
mREZ22    = Space(18)
mREZ33    = Space(18)
mPPLEL80  = Val("00000000.00")
mPPLEO87  = Val("00000000.00")
mPPKOMU53 = Val("00000000.00")
mPPFINU60 = Val("00000000.00")
mPPUUT67  = Val("00000000.00")
mPPUEST74 = Val("00000000.00")
mPPUAUT88 = Val("00000000.00")
mDplacpor = Date()
mBrnal    = Val("00000")
dn = "D"

DO WHILE .T.
   MainMask("IZMENA STAVKE PLACENOG POREZA")

   @  2,27 SAY "ISPRAVKA STAVKI UPLACENOG POREZA"
   @  4, 3 SAY "DATPLACP"
   @  4,32 SAY "BRIZVODA"
   @  5, 3 SAY "POREZ             "
   @  6, 3 SAY "PIO               "
   @  7, 3 SAY "ZDRAVSTVO         "
   @  8, 3 SAY "NEZAPOSLENOST     "
   @  5,40 SAY "P/P LEK LISTA   80"
   @  6,40 SAY "P/P LEK OSTALI  87"
   @  7,40 SAY "P/P KOMUNA.USL. 53"
   @  8,40 SAY "P/P FIN.USLUGA  60"
   @  9,40 SAY "P/P UG.TUR.USL. 67"
   @ 10,40 SAY "P/P USL.ESTRADA 74"
   @ 11,40 SAY "P/P USL.AUT.PAU.88"
   @  4,18 GET mDplacpor
   READ

   IF Lastkey() = 27
      EXIT
   ENDIF

   SEEK mDplacpor
   IF Found()
      mDplacpor = Dplacpor
      mBrnal    = Brnal
      mPPOP73   = PPOP73
      mPPUS05   = PPUS05
      mPPNV46   = PPNV46
      mPPSREC81 = PPSREC81
      mPPKPC03  = PPKPC03
      mPORNDO22 = PORNDO22
      mDOPVL43  = DOPVL43
      mFINTRA50 = FINTRA50
      mPORIM82  = PORIM82
      mPORSRE66 = PORSRE66
      mPORPAU36 = PORPAU36
      mGGZEM    = GGZEM
      mREZ1     = REZ1
      mREZ2     = REZ2
      mREZ3     = REZ3
      mREZ11    = REZ11
      mREZ22    = REZ22
      mREZ33    = REZ33
      mPPLEL80  = PPLEL80
      mPPLEO87  = PPLEO87
      mPPKOMU53 = PPKOMU53
      mPPFINU60 = PPFINU60
      mPPUUT67  = PPUUT67
      mPPUEST74 = PPUEST74
      mPPUAUT88 = PPUAUT88
   ELSE
      MessageBox("NE POSTOJI PLACENI POREZ ZA TAJ DATUM")
      LOOP
   ENDIF

   @  4,18 GET mDplacpor
   @  4,42 GET mBrnal PICTURE "99999"
   @  5,22 GET mPPOP73 PICTURE "99999999.99"
   @  6,22 GET mPPUS05 PICTURE "99999999.99"
   @  7,22 GET mPPNV46 PICTURE "99999999.99"
   @  8,22 GET mPPSREC81 PICTURE "99999999.99"
   @  9, 3 GET mcPPKPC03
   @  9,22 GET mPPKPC03 PICTURE "99999999.99"
   @ 10, 3 GET mcPORNDO22
   @ 10,22 GET mPORNDO22 PICTURE "99999999.99"
   @ 11, 3 GET mcDOPVL43
   @ 11,22 GET mDOPVL43 PICTURE "99999999.99"
   @ 12, 3 GET mcFINTRA50
   @ 12,22 GET mFINTRA50 PICTURE "99999999.99"
   @ 13, 3 GET mcPORIM82
   @ 13,22 GET mPORIM82 PICTURE "99999999.99"
   @ 14, 3 GET mcPORSRE66
   @ 14,22 GET mPORSRE66 PICTURE "99999999.99"
   @ 15, 3 GET mcPORPAU36
   @ 15,22 GET mPORPAU36 PICTURE "99999999.99"
   @ 16, 3 GET mcGGZEM
   @ 16,22 GET mGGZEM PICTURE "99999999.99"

   @ 17, 3 GET mREZ11
   @ 18, 3 GET mREZ22
   @ 19, 3 GET mREZ33
   @ 17,22 GET mREZ1 PICTURE "99999999.99"
   @ 18,22 GET mREZ2 PICTURE "99999999.99"
   @ 19,22 GET mREZ3 PICTURE "99999999.99"
   * polja za kumulative
   @  5,60 GET mPPLEL80 PICTURE "99999999.99"
   @  6,60 GET mPPLEO87 PICTURE "99999999.99"
   @  7,60 GET mPPKOMU53 PICTURE "99999999.99"
   @  8,60 GET mPPFINU60 PICTURE "99999999.99"
   @  9,60 GET mPPUUT67 PICTURE "99999999.99"
   @ 10,60 GET mPPUEST74 PICTURE "99999999.99"
   @ 11,60 GET mPPUAUT88 PICTURE "99999999.99"
   * kraj polja za kumulative
   READ

   IF Lastkey() = 27
      EXIT
   ENDIF

   @ 22,10 SAY " UPIS ISPRAVLJENIH PODATAKA? (D/N) " GET dn PICTURE "!" VALID(dn $ "DdNn")
   READ

   IF Lastkey() = 27
      EXIT
   ENDIF

   IF dn = "N"
      LOOP
   ENDIF

   REPLACE Dplacpor WITH mDplacpor
   REPLACE brnal    WITH mbrnal
   REPLACE PPOP73   WITH mPPOP73
   REPLACE PPUS05   WITH mPPUS05
   REPLACE PPNV46   WITH mPPNV46
   REPLACE PPSREC81 WITH mPPSREC81
   REPLACE PPKPC03  WITH mPPKPC03
   REPLACE PORNDO22 WITH mPORNDO22
   REPLACE DOPVL43  WITH mDOPVL43
   REPLACE FINTRA50 WITH mFINTRA50
   REPLACE PORIM82  WITH mPORIM82
   REPLACE PORSRE66 WITH mPORSRE66
   REPLACE PORPAU36 WITH mPORPAU36
   REPLACE GGZEM    WITH mGGZEM
   REPLACE REZ1     WITH mREZ1
   REPLACE REZ2     WITH mREZ2
   REPLACE REZ3     WITH mREZ3
   REPLACE REZ11    WITH mREZ11
   REPLACE REZ22    WITH mREZ22
   REPLACE REZ33    WITH mREZ33

   REPLACE PPLEL80  WITH mPPLEL80
   REPLACE PPLEO87  WITH mPPLEO87
   REPLACE PPKOMU53 WITH mPPKOMU53
   REPLACE PPFINU60 WITH mPPFINU60
   REPLACE PPUUT67  WITH mPPUUT67
   REPLACE PPUEST74 WITH mPPUEST74
   REPLACE PPUAUT88 WITH mPPUAUT88

   SELECT PLACPNAS
   GO BOTTOM
   REPLACE CPPKPC03  WITH mcPPKPC03
   REPLACE CPORNDO22 WITH mcPORNDO22
   REPLACE CDOPVL43  WITH mcDOPVL43
   REPLACE CFINTRA50 WITH mcFINTRA50
   REPLACE CPORIM82  WITH mcPORIM82
   REPLACE CPORSRE66 WITH mcPORSRE66
   REPLACE CPORPAU36 WITH mcPORPAU36
   REPLACE CGGZEM    WITH mcGGZEM
   * REPLACE CPPLEL80  WITH mcPPLEL80
   * REPLACE CPPLEO87  WITH mcPPLEO87
   * REPLACE CPPKOMU53 WITH mcPPKOMU53
   * REPLACE CPPFINU60 WITH mcPPFINU60
   * REPLACE CPPUUT67  WITH mcPPUUT67
   * REPLACE CPPUEST74 WITH mcPPUEST74
   * REPLACE CPPUAUT88 WITH mcPPUAUT88

   SELECT PLACP
   mDplacpor = Date()
   mbrnal    = 0
   mPPOP73   = 0
   mPPUS05   = 0
   mPPNV46   = 0
   mPPSREC81 = 0
   mPPKPC03  = 0
   mPORNDO22 = 0
   mDOPVL43  = 0
   mFINTRA50 = 0
   mPORIM82  = 0
   mPORSRE66 = 0
   mPORPAU36 = 0
   mGGZEM    = 0
   mREZ1     = 0
   mREZ2     = 0
   mREZ3     = 0
   mREZ11 = Space(18)
   mREZ22 = Space(18)
   mREZ33 = Space(18)
   mPPLEL80  = 0
   mPPLEO87  = 0
   mPPKOMU53 = 0
   mPPFINU60 = 0
   mPPUUT67  = 0
   mPPUEST74 = 0
   mPPUAUT88 = 0
ENDDO

CLOSE PLACP
CLOSE PLACPNAS

RETURN
