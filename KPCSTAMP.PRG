* - nije pregledano - *
CLEAR SCREEN
SET DATE GERMAN

USE KPCPRI INDEX KPCPRIDK
DO WHILE .T.
GO TOP
ESCKEY()
DAT1 = DATE()
DAT2 = DATE()
RED = 0
II = 0
STR = 0
BRSTAVKE = 0
SK = " "
UKUPNO = VAL("000000000000.00")
UK1 = VAL("000000000000.00")
UK2 = VAL("000000000000.00")
@ 10,10 SAY "KNJIGA PRIHODA OD DATUMA" GET DAT1 VALID !Empty(DAT1)
@ 10,48 SAY "DO DATUMA" GET DAT2 VALID !Empty(DAT2)
*@ 12,10 SAY "STR  ILI KOMISION NISTA ZAJEDNO    S/K  " GET SK
READ
*
IF Lastkey() = 27
CLEAR SCREEN
USE
RETURN
ENDIF
IF SK = "S"
   II = 1
ENDIF
IF SK = "S"
   SET FILTER TO PRIH > 0
   GO TOP
ENDIF
IF SK = "K"
   SET FILTER TO PRIH1 > 0
   GO TOP
ENDIF
IF DAT1 > DAT2
    @ 18,10 SAY "POCETNI DATUM VECI OD KRAJNJEG"
    WAIT " "
    CLEAR SCREEN
    LOOP
ENDIF
SET DEVICE TO PRINTER
*SET PRINTER TO LISTA
SET PRINT ON
SET CONSOLE OFF
SET PROCEDURE TO GLAVAQ
DO GLAVAQ
DO WHILE .T.                        
   IF Eof()
      EXIT
   ENDIF

   IF DTOS(DK) >= DTOS(DAT1) .AND. DTOS(DK) <= DTOS(DAT2)
*   IF SK = " "
      UKUPNO = UKUPNO + PRIH
      UK1 = UK1 + PRIH1
      UK2 = UK2 + PRIH2
      @ RED,0 SAY DTOC(DK) + PIR + TRANS(PRIH,"999,999,999.99") + TRANS(PRIH1,"999,999,999.99") + TRANS(PRIH2,"999,999,999.99")
      RED = RED + 1
          IF RED > 62
             RED = 0
             DO GLAVAQ
          ENDIF
 *  ELSE
 *       IF SK = "S"
 *       ELSE
 *       ENDIF
 *  ENDIF     && OD IF SK
   ENDIF
 SKIP
ENDDO
SET FILTER TO
RED = RED + 1
@ RED,0 SAY REPLI("*",80)
RED = RED + 1
@ RED,10 SAY "UKUPNI PRIHOD :"                 
@ RED,26 SAY UKUPNO PICTURE "999,999,999.99"
@ RED,42 SAY UK1 PICTURE "999,999,999.99"
@ RED,57 SAY UK2 PICTURE "999,999,999.99"
@ red + 1,0 SAY " "
eject
SET CONSOLE ON
SET DEVICE TO SCREEN
set print off
CLEAR SCREEN
USE
RETURN
ENDDO
        
PROC GLAVAQ
STR = STR + 1
RED = RED + 2
@ RED,1 SAY gcNazRad
@ RED,35 SAY "STAMPANJE KNJIGE PRIHODA"
@ RED,70 SAY "STR:"
@ RED,76 SAY STR PICTURE "9999"
RED = RED + 1
@ RED,5 SAY "OD:"
@ RED,9 SAY DAT1
@ RED,66 SAY "DO:"
@ RED,70 SAY DAT2
RED = RED + 1
@ RED,0 SAY REPLI("*",80)
RED = RED + 1
*@ RED,0 SAY "R.BR"
@ RED,0 SAY "DAT.KNJI"
*@ RED,17 SAY "PAZ./RAC"
@ RED,27 SAY "PRIHOD       "
@ RED,43 SAY "PRIHOD1   "
@ RED,60 SAY "PRIHOD2   "
RED = RED + 1
RETURN
